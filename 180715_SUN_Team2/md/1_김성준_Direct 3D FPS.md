# Direct 3D FPS

**20180716 김성준 이승혁**

[문제](http://reversing.kr/challenge.php)를 풀었습니다.

저희는 라이트 업을 만드는 게 목표가 아니라 게임을 해킹하는 것이 목표였기 때문에 다양한 방법으로 문제를 해결하려고 했고, 그래서 정석적인 풀이 방법과 다른 풀이 방법 두 가지로 나누게 되었습니다. 

------

## 1. Standard Solution

<img width="812" alt="screen shot 2018-07-23 at 4 40 39 pm" src="https://user-images.githubusercontent.com/40850499/43063584-3799a1e6-8e97-11e8-8879-0178dfbef18c.png">

프로그램을 분석해 보니 고구마를 50마리 잡아야 하는데 게임 상에서 확인할 수 있는 고구마는 48마리 밖에 없어서 분석을 더 해봤습니다.

실습을 해 본 결과 정석적인 풀이 과정은 어디서 시작해야할 지 찾아보고 전체 프로그램을 대략적으로 이해하고, 알아내야 할 키 부분을 찾고 어떻게 해야할 지 알아내는 부분, 키 부분을 알아내는데 필요한 연산을 만들고 실행하는 것. 이렇게 세 부분으로 나눌 수 있었습니다.

------

(사진)

디버거로 연 후에 텍스트 스트링을 확인해 보니 게임 클리어 부분이 보입니다. 이 부분을 중심으로 여러가지 다른 부분을 찾을 수 있었습니다.  

(사진)

이 부분에서 연산식을 알아낼 수 있었습니다.

\1. 고구마값을 eax로 반환

\2. eax를 ecx에 넣음

\3. ecx *= 0x210

\4. cl = [ecx + 409184]

\5. XOR [eax + 407028], CL

------

(사진)

(키)

이 부분에서는 407028부터 시작되는 암호문 50자를 찾을 수 있었습니다. 

------

(코드)

(결과 사진)

왼쪽의 코드를 이용해 암호문을 연산한 결과 오른쪽의 문자열이 나왔습니다. 

------

## 2. Variant Solution

다른 풀이법을 찾아봤습니다. 일단 벽, 구체 등을 삭제하는 방법과 고구마의 체력이나 생성 지점을 수정하는 방법 등을 시도해 보았습니다. 

?????

머식이 형 도움을 받아서 이렇게저렇게 할 수 있다는 사실은 알아냈는데 아직 해보진 못했다 ~~~.

가정을 세워보자 

1. 정수형이 아닐 것이다. 
2. \2. X,Y좌표 형식으로 이루어졌을 것이다. 
3. \3. 소수점형식으로 표현 되어 있을 것이다. -> float 이나 double 형일 것이다. 
4. \4. 맵이 작다. Float부터 찾자.

고구마의 체력을 관리하는 부분을 따라가 보면 고구마의 좌표를 설정하는 부분을 찾을 수 있을 것이라 생각해 따라가 보았지만 찾을 수 없었다.

그리고 실행 파일 외에도 Data 폴더 안의 goguma.x 파일을 열어봤더니 위 사진과 같은 내용들이 나왔고 뭔가 좌표같기도 하고 해서 테스트를 해보려 했지만 하지 못했습니다.

